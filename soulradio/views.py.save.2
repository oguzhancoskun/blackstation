from django.shortcuts import render
from django.http import HttpResponse
from django.shortcuts import render_to_response
from django.templatetags.static import static
import soundcloud

from django.template import Template, Context

# Create your views here.

def home(request):

	#search=raw_input('Find>>')

        client = soundcloud.Client(client_id='0c7ba7f850fd26aa4b6c0efc42e4838b')

        #tracks = client.get('/tracks', q=search, license='cc-by-sa')

        #for track in tracks:
        #       print track.title," - ",track.id

        #name=raw_input('Select>>')
	
	musicx=[]
	namex=[]
	lst=['chris-brown-ft-kid-ink-main','senile-feat-tyga-nicki-minaj','t-pain-up-down-do-this-all-day','ti-ball','sofly-swagger-cut','hardwell-spaceman-out-now','hardwell-ultra-music-music-festival-2013','dj-elon-matana-vol8','dj-elon-matana-hits-of-2013','ty-dolla-sign-paranoid-ft-b-o','hardwell-live-at-electric-zoo-new-york-free-download']
	for l in lst:
        	play = client.get('/tracks/'+l)
        	
		s = client.get(play.stream_url, allow_redirects=False)	
	
		musicx.append(s.location)		
		namex.append(l)
	s=Template(u'''
	<html>
	
		<head>
			<link href='http://fonts.googleapis.com/css?family=Aldrich' rel='stylesheet' type='text/css'>		
			{%load staticfiles%}
			
			<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>				

			<script>

				window.onload=function what(){
	
				var audio= document.getElementById('audio');
                                var listm=[];
				var namex=[];
				{% for m in musicx %}
                                        listm.push("{{m}}");
                                {% endfor %}
				
				{% for n in namex %}
					namex.push("{{n}}");
				{% endfor %}

				var first = Math.floor(Math.random()*listm.length);	

				var ptag= document.getElementById('p1');
				ptag.innerHTML=namex[first].toUpperCase();
										
       	                        audio.setAttribute('src',listm[first]);
                                audio.play();
		
				len = listm.length;
				audio.addEventListener('ended',function()
					{
						var rnd = Math.floor(Math.random()*listm.length);						

						this.src=listm[rnd];
						ptag.innerHTML=namex[rnd].toUpperCase();
                                                this.play();

					});        	

		
				 $(document).ready(function() {
      				 $('body').css('background','url({%static "tupac.jpg"%}) no-repeat center center fixed');
   	 			});
				};
			
					window.onload= function fch(){
                                        var sound=new Audio('{% static  "change.mp3"%}');
                                       	var audio=document.getElementById('audio');
					audio.pause();
				
					 sound.play();
                                }




                        </script>
			<style type='text/css'>

				body{
					-webkit-background-size: cover;
  					-moz-background-size: cover;
  					-o-background-size: cover;
  					 background-size: cover;
					}
				
				.sticker{
					margin-right:10px;
					float:left; 
					-moz-box-shadow: 2px 2px 2px 2px #000;
                                        -webkit-box-shadow: 2px 2px 2px 2px #000;
                                        box-shadow: 2px 2px 2px 2px #000;
					border-radius:7px;
					height:40px;
					
					}

				.change{
                                        margin-right:10px;
                                        float:left;
                                        -moz-box-shadow: 2px 2px 2px 2px #000;
                                        -webkit-box-shadow: 2px 2px 2px 2px #000;
                                        box-shadow: 2px 2px 2px 2px #000;
                                        border-radius:7px;
                                        height:40px;

                                        }

				.change:active{
					margin-right:10px;
                                        float:left;
					border-radius:7px;
					height:40px;
					-moz-box-shadow: 1px 1px 0px 0px #222;
                                        -webkit-box-shadow: 1px 1px 0px 0px #222;
                                        box-shadow: 1px 1px 0px 0px #222;
						}



				.art{ margin: 12px; font-family: 'Aldrich', sans-serif; color:white; font-size:15px;}
			</style>

               </head>
		
		<body>				

				<div class='sticker'>
                                        <p class='art' id='p1'></p>
                                </div>				
				<div onclick='fch()' class='change'>
                                       <p class='art'> CHANGE </p>
                                </div>

				<br>

				<center>
					<div style='margin-top:200px;'>
						<img src='{%static "black.png"%}'/>
					</div>
				</center>
				
		
										
		</body>

		''')	
	
        #client.put('/me/favorites/%d' % track.id)

	b=Context({'musicx':musicx,'namex':namex})
	html=s.render(b)

	return HttpResponse(html)
